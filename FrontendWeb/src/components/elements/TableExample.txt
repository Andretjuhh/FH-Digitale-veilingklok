// --- Example Usage (Order specific) ---

interface Order {
	id: number;
	itemName: string;
	category: string;
	orderId: string;
	orderDate: string;
	customer: string;
	customerType: string;
	avatar: string;
	price: number;
	paymentMethod: string;
	status: 'Accepted' | 'Completed' | 'Rejected' | 'Pending';
	icon: string;
}

const mockOrders: Order[] = [
	{
		id: 1,
		itemName: 'Choco Chucu',
		category: 'Iced',
		orderId: '#CFFE109283',
		orderDate: '11 Jan 2025, 23:39',
		customer: 'Paistudio',
		customerType: 'Star Customer',
		avatar: 'ğŸ¨',
		price: 5.0,
		paymentMethod: 'Cash on Delivery',
		status: 'Accepted',
		icon: 'ğŸ«',
	},
	{
		id: 2,
		itemName: 'Brocoli Cinno',
		category: 'Iced',
		orderId: '#CFFEB42701',
		orderDate: '11 Jan 2025, 23:39',
		customer: 'Azrul Artistik',
		customerType: 'Star Customer',
		avatar: 'ğŸ‘¤',
		price: 8.2,
		paymentMethod: 'Paid by Gopay',
		status: 'Completed',
		icon: 'ğŸ¥¦',
	},
	{
		id: 3,
		itemName: 'Cinta Kamu',
		category: 'Sweet',
		orderId: '#CKKE397512',
		orderDate: '1 Feb 2025, 23:39',
		customer: 'Raihan Rabka',
		customerType: 'New Customer',
		avatar: 'ğŸ‘¨',
		price: 6.1,
		paymentMethod: 'Paid by Gopay',
		status: 'Completed',
		icon: 'â¤ï¸',
	},
	{
		id: 4,
		itemName: 'Choco Chips',
		category: 'Sweet & Salt',
		orderId: '#CKKE650384',
		orderDate: '1 Feb 2025, 23:39',
		customer: 'Tyo Ditya',
		customerType: 'Star Customer',
		avatar: 'ğŸ‘”',
		price: 1.0,
		paymentMethod: 'Paid by OVO',
		status: 'Accepted',
		icon: 'ğŸª',
	},
	{
		id: 5,
		itemName: 'Rumput Laut Latte',
		category: 'Hot',
		orderId: '#CFFE204971',
		orderDate: '1 Feb 2025, 23:39',
		customer: 'Noval Amarul',
		customerType: 'New Customer',
		avatar: 'ğŸ§‘',
		price: 10.0,
		paymentMethod: 'Cash on Pickup',
		status: 'Rejected',
		icon: 'ğŸŒŠ',
	},
	{
		id: 6,
		itemName: 'Pitch Choco',
		category: 'Sweet',
		orderId: '#DGHT738620',
		orderDate: '1 Mar 2025, 23:39',
		customer: 'Design Lagi',
		customerType: 'Star Customer',
		avatar: 'âš«',
		price: 69.5,
		paymentMethod: 'Paid by PayPal',
		status: 'Completed',
		icon: 'ğŸ«',
	},
	{
		id: 7,
		itemName: 'Bening Latte',
		category: 'Iced',
		orderId: '#CFFE416985',
		orderDate: '1 Apr 2025, 23:39',
		customer: 'John Doe',
		customerType: 'New Customer',
		avatar: 'ğŸ‘¨â€ğŸ’¼',
		price: 3.2,
		paymentMethod: 'Cash on Delivery',
		status: 'Pending',
		icon: 'â˜•',
	},
];

// App Component with Column Configuration
export default function App(): React.JSX.Element {
	const [lazyData, setLazyData] = useState<Order[]>([]);
	const [loading, setLoading] = useState(false);
	const [totalItems, setTotalItems] = useState(0);

	const columns: Column<Order>[] = useMemo(
			() => [
				{
					key: 'itemName',
					label: 'Item Name',
					sortable: true,
					render: (item: Order) => (
						<div className="app-table-cell-item">
						<div className="app-table-cell-icon">{item.icon}</div>
						<div>
						<div className="app-table-cell-title">{item.itemName}</div>
							<div className="app-table-cell-subtitle">{item.category}</div>
						</div>
						</div>
		),
		},
		{
			key: 'orderId',
			label: 'Order ID',
			sortable: true,
			render: (item: Order) => (
		<div>
			<div className="app-table-cell-title">{item.orderId}</div>
			<div className="app-table-cell-subtitle">{item.orderDate}</div>
		</div>
),
},
	{
		key: 'customer',
			label: 'Customer',
		sortable: true,
		render: (item: Order) => (
		<div className="app-table-cell-item">
		<div className="app-table-cell-avatar">{item.avatar}</div>
		<div>
		<div className="app-table-cell-title">{item.customer}</div>
			<div className="app-table-cell-subtitle">{item.customerType}</div>
		</div>
		</div>
	),
	},
	{
		key: 'price',
			label: 'Price',
		sortable: true,
		render: (item: Order) => (
		<div>
			<div className="app-table-cell-title">${item.price.toFixed(2)}</div>
	<div className="app-table-cell-subtitle">{item.paymentMethod}</div>
		</div>
	),
	},
	{
		key: 'status',
			label: 'Status',
		sortable: true,
		render: (item: Order) => <StatusBadge status={item.status as any}/>,
	},
	{
		key: 'action',
			label: 'Action',
		render: (item: Order, onAction?: (item: Order) => void) => (
		<button onClick={() => onAction?.(item)} className="app-table-action-btn">
		View Details
	</button>
	),
	},
],
	[]
);

	const handleAction = (item: Order): void => {
		alert(`Viewing details for ${item.itemName} (${item.orderId})`);
	};

	const handleFetchData = useCallback(async ({page, searchTerm, sortConfig}: { page: number; searchTerm: string; sortConfig: SortConfig }) => {
		setLoading(true);

		// Simulate API call delay
		await new Promise((resolve) => setTimeout(resolve, 1000));

		let filtered = [...mockOrders];
		if (searchTerm) {
			filtered = filtered.filter((item) => item.itemName.toLowerCase().includes(searchTerm.toLowerCase()) || item.orderId.toLowerCase().includes(searchTerm.toLowerCase()) || item.customer.toLowerCase().includes(searchTerm.toLowerCase()));
		}

		if (sortConfig.key) {
			filtered.sort((a, b) => {
				const aVal = a[sortConfig.key as keyof Order];
				const bVal = b[sortConfig.key as keyof Order];
				if (aVal < bVal) return sortConfig.direction === 'asc' ? -1 : 1;
				if (aVal > bVal) return sortConfig.direction === 'asc' ? 1 : -1;
				return 0;
			});
		}

		const itemsPerPage = 5;
		const start = (page - 1) * itemsPerPage;
		const paginated = filtered.slice(start, start + itemsPerPage);

		setLazyData(paginated);
		setTotalItems(filtered.length);
		setLoading(false);
	}, []);

	return (
		<div className="app-table-demo-container">
		<div className="app-table-demo-wrapper">
		<h1 className="app-table-demo-title">Product Orders (Client Side)</h1>
	<DataTable<Order> data={mockOrders} columns={columns} itemsPerPage={5} onAction={handleAction}/>
	</div>

	<div className="app-table-demo-wrapper">
	<h1 className="app-table-demo-title">Product Orders (Lazy Loading)</h1>
	<DataTable<Order> data={lazyData} columns={columns} itemsPerPage={5} onAction={handleAction} isLazy={true} loading={loading} totalItems={totalItems}
	onFetchData={handleFetchData}/>
	</div>
	</div>
);
}